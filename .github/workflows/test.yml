name: Lint, test, and build.

on: [push, pull_request_target]

jobs:
    lint_test_build:
        name: Lint, test, and build.
        runs-on: ubuntu-latest
        steps:
            - name: ğŸ•¶ï¸ Checkout repository
              uses: actions/checkout@v4

            - name: ğŸï¸ Setup Java 20
              uses: actions/setup-java@v3
              with:
                  distribution: temurin
                  java-version: 20
                  cache: gradle

            - name: ğŸ“‹ Lint
              run: ./gradlew lint --no-daemon

            - name: ğŸ§ª Test
              run: ./gradlew test --no-daemon

            - name: ğŸ› ï¸ Build 
              run: ./gradlew :app:assembleDebug --no-daemon

            - name: ğŸ“¦ Upload Debug APK to GitHub
              uses: actions/upload-artifact@v3
              with:
                  name: parrot-debug.apk
                  path: app/build/outputs/apk/debug/app-debug.apk
